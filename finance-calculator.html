<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" href="img/favicon-red.png" type="image/png">
        <title>Finance Calculator || Steerings </title>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="vendors/icomoon-icon/style.css">
        <link rel="stylesheet" href="vendors/themify-icon/themify-icons.css">
        <!-- Extra Plugin CSS -->
        <link rel="stylesheet" href="vendors/datetimepicker/tempusdominus-bootstrap-4.min.css">
        <link rel="stylesheet" href="vendors/nice-select/css/nice-select.css">
        <link rel="stylesheet" href="vendors/owl-carousel/assets/owl.carousel.min.css">
        <link rel="stylesheet" href="vendors/slick/slick.css">
        <link rel="stylesheet" href="vendors/slick/slick-theme.css">
        <link rel="stylesheet" href="vendors/popup/magnific-popup.css">
        
        <!-- main css -->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/responsive.css">
    </head>
    <body>
        
       <div class="preloader">
        	<div class="main-loader">
			  <span class="loader1"></span>
			  <span class="loader2"></span>
			  <span class="loader3"></span>
			</div>
        </div>
       
        <!--================Header Area =================-->
        <header class="header_area menu_two menu_three">
        	<div class="top_menu">
        		<div class="container">
        			<div class="top_menu_inner d-flex justify-content-between">
        				<div class="left">
        					<p><i class="icon-clock"></i>Monday-Saturday 10:00AM - 9:00PM</p>
        					<p><i class="icon-map_marker"></i>Jubliee Hills, Hyderabad, TS, India</p>
        				</div>
        				<div class="right">
        					<a href="tel:9100880047"><i class="icon-phone1"></i><span>910</span> 0880 044</a>
        				</div>
        			</div>
        		</div>
        	</div>
        	<div class="main_menu">
				<div class="container">
					<nav class="navbar navbar-expand-lg navbar-light bg-light">
						<a class="navbar-brand" href="index.html"><img src="img/logo-steerings.png" alt="bar"></a>
						<a class="navbar-brand" href="index.html"><img src="img/logo-steerings.png" alt="bar"></a>
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span></span>
						</button>
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="nav navbar-nav menu_nav mr-auto">
								<li class="dropdown mega_menu">
									<a class="dropdown-toggle" data-toggle="dropdown" href="index.html" role="button" aria-haspopup="true" aria-expanded="false">Home</a>
								</li>
								<li class="dropdown submenu">
									<a class="dropdown-toggle" data-toggle="dropdown" href="about-us.html" role="button" aria-haspopup="true" aria-expanded="false">About Us</a>
								</li>
								<li class="dropdown submenu">
									<a class="dropdown-toggle" data-toggle="dropdown" href="our-collection.html" role="button" aria-haspopup="true" aria-expanded="false">Our Collection</a>
								</li>
								<li class="dropdown submenu active">
									<a class="dropdown-toggle" data-toggle="dropdown" href="finance-calculator.html" role="button" aria-haspopup="true" aria-expanded="false">Finance Calculator</a>
								</li>
								
								<li><a href="contact.html">Contact</a></li>
							</ul>
							<ul class="nav navbar-nav navbar-right">
								<li class="search_icon"><a class="search popup-with-zoom-anim" href="#test-search"><i class="icon-search1"></i></a></li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
        </header>
        <!--================End Footer Area =================-->
        
        <!--================Breadcrumb Area =================-->
        <section class="breadcrumb_area" style="background: url(img/breadcrumb/breadcrumb-bg-4.png)">
        	<div class="container">
        		<div class="breadcrumb_inner">
        			<h3>Finance Calculator</h3>
        			<div class="link">
        				<a href="index.html">Home</a>
        				<a href="finance-calculator.html">Finance Calculator</a>
        			</div>
        		</div>
        	</div>
        </section>
        <!--================End Breadcrumb Area =================-->
        
        <!--================Finance Calculator Area =================-->
        <header class="header">
			<div class="header__text-box">
				<h1 class="heading-primary">
					CAR FINANCING CALCULATOR
				</h1>
				<h2 class="heading-secondary">
					Estimate your monthly payment for your next car using the calculator below
				</h2>
			</div>
		</header>
		<main>
			<section class="section-chart">
				<div class="chart-box">
					<div class="chart"></div>
					<div class="chart__description">
						<div class="chart__legend">
							<div class="legend__box">
								<h3 class="chart__description-label label__colored label__colored-1">Interest</h3>
								<p class="chart__description-value interest">1550</p>
							</div>
							<div class="info">
								<span class="info__icon"></span>
								<div class="info__tooltip">
									<h3 class="info__header">Interest</h3>
									<p class="info__body">Interest is the dollar amount the credit will cost you.</p>
								</div>
							</div>
						</div>
						<div class="chart__legend">
							<div class="legend__box">
								<h3 class="chart__description-label label__colored label__colored-2">Taxes</h3>
								<p class="chart__description-value taxes">0</p>
							</div>
							<div class="info">
								<span class="info__icon"></span>
								<div class="info__tooltip">
									<h3 class="info__header">Taxes</h3>
									<p class="info__body">
										The amount presented for taxes reflects the dollar amount of tax
										based on the MSRP and Tax Rate shown.
									</p>
								</div>
							</div>
						</div>
						<div class="chart__legend">
							<div class="legend__box">
								<h3 class="chart__description-label">
									Estimated Total Cost
									<span class="label--sub">(including taxes and interest)</span>
								</h3>
								<p class="chart__description-value est_total_cost">31,550</p>
							</div>
							<div class="info">
								<span class="info__icon"></span>
								<div class="info__tooltip">
									<h3 class="info__header">Estimated Total Cost</h3>
									<p class="info__body">
										The Estimated Total Cost is a summation of the
										Amount Financed, Finance Charge and Taxes and any cash
										down payment and/or net trade-in amount.
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<section class="section-chart-controllers">
				<div class="controllers-box">
					<div class="controller-row row" id="price">
						<div class="col-1-of-3">
							<h3 class="chart__description-label label__colored label__colored-3">Vehicle Price</h3>
						</div>
						<div class="col-1-of-3">
							<input type="range" class="calc__slider">
						</div>
						<div class="col-1-of-3">
							<span class="calc__input-group">
								<span class="calc__input-group-addon">$</span>
								<input type="number" class="calc__input" placeholder="Vehicle Price">
								<div class="info-box">
									<div class="info">
										<span class="info__icon"></span>
										<div class="info__tooltip">
											<h3 class="info__header">Vehicle Price</h3>
											<p class="info__body">
												The Manufacturer Suggested Retail Price (MSRP) or “sticker price”
												is the recommended selling price for the vehicle. The Dealer may adjust
												the actual selling price, either higher or lower. The MSRP excludes
												transportation and handling charges, destination charges, taxes, title,
												registration, preparation and documentary fees, tags, labor and installation
												charges, insurance, optional equipment or packages and accessories.
											</p>
										</div>
									</div>
								</div>
							</span>
						</div>
					</div>
					<div class="controller-row row" id="cash_down_payment">
						<div class="col-1-of-3">
							<h3 class="chart__description-label label__colored label__colored-4">Cash Down Payment</h3>
						</div>
						<div class="col-1-of-3">
							<input type="range" class="calc__slider">
						</div>
						<div class="col-1-of-3">
							<span class="calc__input-group">
								<span class="calc__input-group-addon">$</span>
								<input type="number" class="calc__input" placeholder="Cash Down Payment">
								<div class="info-box">
									<div class="info">
										<span class="info__icon"></span>
										<div class="info__tooltip">
											<h3 class="info__header">Cash Down Payment</h3>
											<p class="info__body">
												The Down Payment is an up-front cash payment
												made when you purchase the vehicle that reduces
												the amount financed. This app uses a default cash down payment of
												20% of MSRP.
											</p>
										</div>
									</div>
								</div>
							</span>
						</div>
					</div>
					<div class="controller-row row" id="trade_in_value">
						<div class="col-1-of-3">
							<h3 class="chart__description-label label__colored label__colored-5">Trade-In Value</h3>
						</div>
						<div class="col-1-of-3">
							<input type="range" class="calc__slider">
						</div>
						<div class="col-1-of-3">
							<span class="calc__input-group">
								<span class="calc__input-group-addon">$</span>
								<input type="number" class="calc__input" placeholder="Trade-In Value">
								<div class="info-box">
									<div class="info">
										<span class="info__icon"></span>
										<div class="info__tooltip">
											<h3 class="info__header">Trade-In Value</h3>
											<p class="info__body">
												The Trade-In Value is the value of your trade-in vehicle.
												The dealer will determine the amount you actually receive for your
												trade-in vehicle.
											</p>
										</div>
									</div>
								</div>
							</span>
						</div>
					</div>
					<div class="controller-row row" id="tax_rate">
						<div class="col-1-of-3">
							<h3 class="chart__description-label label__colored label__colored-2">Tax Rate</h3>
						</div>
						<div class="col-1-of-3">
							<input type="range" class="calc__slider">
						</div>
						<div class="col-1-of-3">
							<span class="calc__input-group">
								<input type="number" class="calc__input" placeholder="Tax Rate">
								<span class="calc__input-group-addon">%</span>
								<div class="info-box">
									<div class="info">
										<span class="info__icon"></span>
										<div class="info__tooltip">
											<h3 class="info__header">Tax Rate</h3>
											<p class="info__body">
												The sales tax rate provided is for sample purposes only.
												This app uses a default tax rate of 0%.
												If you know the sales tax rate for your location,
												please enter it in the field provided.
											</p>
										</div>
									</div>
								</div>
							</span>
						</div>
					</div>
					<div class="controller-row row"  id="term">
						<div class="col-1-of-3">
							<h3 class="chart__description-label label__colored">Term</h3>
						</div>
						<div class="col-1-of-3">
							<input type="range" class="calc__slider">
						</div>
						<div class="col-1-of-3">
							<span class="calc__input-group">
								<input type="number" class="calc__input" placeholder="Term">
								<span class="calc__input-group-addon">mo</span>
								<div class="info-box">
									<div class="info">
										<span class="info__icon"></span>
										<div class="info__tooltip">
											<h3 class="info__header">Term</h3>
											<p class="info__body">
												Term represents the repayment period in months for
												the amount financed. This app uses a default term of 60 months.
											</p>
										</div>
									</div>
								</div>
							</span>
						</div>
					</div>
					<div class="controller-row row" id="apr">
						<div class="col-1-of-3">
							<h3 class="chart__description-label label__colored">APR</h3>
						</div>
						<div class="col-1-of-3">
							<input type="range" class="calc__slider">
						</div>
						<div class="col-1-of-3">
							<span class="calc__input-group">
								<input type="number" class="calc__input" placeholder="APR">
								<span class="calc__input-group-addon">%</span>
								<div class="info-box">
									<div class="info">
										<span class="info__icon"></span>
										<div class="info__tooltip">
											<h3 class="info__header">APR</h3>
											<p class="info__body">
												APR is the Annual Percentage Rate. Actual APR is based on
												the creditworthiness of the customer. Not all customers
												will qualify for the lowest rate.
											</p>
										</div>
									</div>
								</div>
							</span>
						</div>
					</div>
				</div>
				<div class="section-chart-controllers__footer">
					<button class="btn btn-link btn__toggle-modal">
						*Financing Disclosures
					</button>
					<button class="btn btn-secondary btn__reset">
						Reset
					</button>
				</div>
			</section>
		</main>
		<div class="dialog">
			<div class="modal-backdrop"></div>
			<div class="modal">
				<div class="modal__header">
					<span class="modal__header__text">Financing Disclosures</span>
					<span class="modal__header__close btn__toggle-modal">&Cross;</span>
				</div>
				<div class="modal__content">
					<p>
						Numerical values are not an advertisement or offer for specific terms of credit.
						Payment amounts presented are estimates and are for illustrative purposes only.
						Actual vehicle price may vary by Dealer. The MSRP excludes transportation and handling charges,
						destination charges, taxes, title, registration, preparation and documentary fees, tags,
						labor and installation charges, insurance, optional products, equipment or packages and accessories.
					</p>
					<h2 class="modal__content-header">
						Lease Transactions:
					</h2>
					<p>
						The amount due at lease signing is the amount to be paid by the lessee prior to or at signing of
						the lease or by delivery of the vehicle. It includes the first month’s payment, any acquisition fee,
						down payment, less any net trade-in amount. The Estimated Monthly Lease Payment shown is based on
						a 36 month term, down payment of $3,000, annual mileage allowance of 12,000 miles, a 0.001 money
						factor, a tax rate of 0.0%, and a $0 net trade-in. A security deposit may be required depending on
						creditworthiness.
					</p>
					<p>
						If you change the Down Payment or Term or Annual Mileage allowance, or if you
						trade in your current vehicle, the Estimated Monthly Payment will change.
					</p>
					<p>
						The payment amount does not include title, license or registration fees.
						Payment amounts may be different due to various factors such as fees, specials,
						rebates, term, down payment, trade-in, applicable tax rate, and creditworthiness of
						the customer. Please contact your selected dealer or lender for program details and actual terms.
					</p>
					<h2 class="modal__content-header">
						Finance Transactions:
					</h2>
					<p>
						The Estimated Monthly Payment is based on a 60 month term, a down payment of $6,000,
						Annual Percentage Rate (APR) of 2.49%, a tax rate of 0.0%, and a $0 net trade-in.
						If you change the Down Payment or Term, or if you trade in your current vehicle,
						the Estimated Monthly Payment will change.
					</p>
					<p>
						The payment amount does not include title, license or registration fees.
						Payment amounts may be different due to various factors such as fees, specials,
						rebates, term, down payment, APR, trade-in, and applicable tax rate. The APR presented
						may not be the lowest rate available. Actual APR is based on the creditworthiness of the customer.
						Not all customers will qualify for the lowest rate. Please contact your selected dealer or
						lender for actual rates, program details and actual terms.
					</p>
				</div>
				<div class="modal__footer">
					<button class="btn btn-secondary btn_close btn__toggle-modal">
						Close
					</button>
				</div>
			</div>
		</div>
        <!--================End Finance Calculator Area =================-->
        
        <!--================Footer Area =================-->
        <footer class="footer_area red_footer_area ab_footer">
        	<div class="footer_widgets">
        		<div class="container">
        			<div class="row f_widgets_inner">
        				<div class="col-lg-3 col-sm-6">
        					<aside class="f_widget about_widget">
        						<a class="f_logo" href="index.html"><img src="img/repair-logo.png" srcset="img/repair-logo-2x.png 2x" alt="bar"></a>
        						<p><i class="icon-map_marker_2" aria-hidden="true"></i> Wave, Via Habro Derennio 22/b 52100 Arezzo, Italy</p>
        						<a href="mailto:ask@example.com"><i class="icon-envelop_2" aria-hidden="true"></i> ask@example.com</a>
        						<a href="tel:0951856558"><i class="icon-phone_2" aria-hidden="true"></i> 095 1856 558 (Toll Free)</a>
        					</aside>
        				</div>
        				<div class="col-lg-2 col-sm-6">
        					<aside class="f_widget link_widget">
        						<div class="f_title">
        							<h3>Our info</h3>
        						</div>
        						<ul class="nav flex-column">
        							<li><a href="#">About us</a></li>
        							<li><a href="#">Our Services</a></li>
        							<li><a href="#">Our Shop</a></li>
        							<li><a href="#">Blog</a></li>
        							<li><a href="#">Contact us</a></li>
        						</ul>
        					</aside>
        				</div>
        				<div class="col-lg-3 col-sm-6">
        					<aside class="f_widget link_widget">
        						<div class="f_title">
        							<h3>Quick Link</h3>
        						</div>
        						<ul class="nav flex-column">
        							<li><a href="#">Private Policy</a></li>
        							<li><a href="#">Team & Conditions</a></li>
        							<li><a href="#">Copyright Notification</a></li>
        							<li><a href="#">Private Policy</a></li>
        							<li><a href="#">Team & Conditions</a></li>
        						</ul>
        					</aside>
        				</div>
        				<div class="col-lg-4 col-sm-6">
        					<aside class="f_widget subscribe_widget">
        						<div class="f_title">
        							<h3>Subscribe us</h3>
        						</div>
								<div class="input-group">
									<input type="text" class="form-control" placeholder="Your email">
									<div class="input-group-append">
										<button class="btn btn-outline-secondary red" type="button" id="button-addon2"><i class="icon-arrow_3"></i></button>
									</div>
								</div>
       							<ul class="nav">
       								<li><a href="#"><i class="fa fa-facebook"></i></a></li>
       								<li><a href="#"><i class="fa fa-youtube"></i></a></li>
       								<li><a href="#"><i class="fa fa-twitter"></i></a></li>
       								<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
       							</ul>
        					</aside>
        				</div>
        			</div>
        		</div>
        	</div>
        	<div class="footer_card">
        		<div class="container">
        			<div class="f_card_inner d-flex justify-content-between">
        				<div class="left">
        					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit sed them eiusmod tempor<br /> incididunt labore et dolorie magna aliqua.</p>
        				</div>
        				<div class="right">
        					<ul class="nav">
        						<li><a href="#"><img src="img/icon/card-1.png" alt=""></a></li>
        						<li><a href="#"><img src="img/icon/card-2.png" alt=""></a></li>
        						<li><a href="#"><img src="img/icon/card-3.png" alt=""></a></li>
        						<li><a href="#"><img src="img/icon/card-4.png" alt=""></a></li>
        					</ul>
        				</div>
        			</div>
        		</div>
        	</div>
        	<div class="footer_copyright">
        		<div class="container">
        			<div class="copyright_inner d-flex justify-content-between">
        				<div class="left">
        					<p>Copyright Reserved by <a href="index.html">Droitthems </a> <script>document.write(new Date().getFullYear());</script></p>
        				</div>
        				<div class="right">
        					<ul class="nav">
        						<li><a href="#">Terms of use</a></li>
        						<li><a href="#">Privacy Environmental</a></li>
        						<li><a href="#">Policy</a></li>
        					</ul>
        				</div>
        			</div>
        		</div>
        	</div>
        </footer>
        <!--================End Footer Area =================-->
        
        
        <!--================Cart Sidebar Area =================-->
        <div class="cart_sidebar">
        	<div class="cart_sidebar_inner">
        		<div class="sidebar_top">
        			<div class="top_bar d-flex justify-content-between">
        				<h3>Shopping Cart</h3>
        				<div class="cart_close_btn">
        					<p>Close <i class="ti-minus"></i></p>
        				</div>
        			</div>
        			<div class="cart_side_list">
        				<div class="media">
							<div class="d-flex"><img src="img/product/cart-details/cart-1.jpg" alt=""></div>
							<div class="media-body">
								<h4>Smart light wood edition</h4>
								<p>1 x <span>$40.00</span></p>
								<i class="ti-close"></i>
							</div>
						</div>
						<div class="media">
							<div class="d-flex"><img src="img/product/cart-details/cart-1.jpg" alt=""></div>
							<div class="media-body">
								<h4>Smart light wood edition</h4>
								<p>1 x <span>$40.00</span></p>
								<i class="ti-close"></i>
							</div>
						</div>
        			</div>
        		</div>
        		<div class="sidebar_bottom">
        			<h5>Sub Total</h5>
        			<h6>$200.00</h6>
        			<a class="main_btn red border" href="#">View Cart</a>
        			<a class="main_btn red" href="#">Checkout</a>
        		</div>
        	</div>
        </div>
        <!--================End Cart Sidebar Area =================-->
        
        <!--================Search Box Area =================-->
        <div class="search_area zoom-anim-dialog mfp-hide" id="test-search">
            <div class="search_box_inner">
                <h3>Search</h3>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Enter search keywords">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="icon icon-Search"></i></button>
                    </span>
                </div>
            </div>
        </div>
        <!--================End Search Box Area =================-->
        
        
        
        <!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="js/loan.js"></script>
        <script src="js/jquery-3.4.1.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
       
        <!-- Extra Plugin js -->
        <script src="vendors/datetimepicker/moment.js"></script>
        <script src="vendors/datetimepicker/tempusdominus-bootstrap-4.min.js"></script>
        <script src="vendors/nice-select/js/jquery.nice-select.min.js"></script>
        <script src="vendors/owl-carousel/owl.carousel.min.js"></script>
        <script src="vendors/isotope/imagesloaded.pkgd.min.js"></script>
        <script src="vendors/isotope/isotope.pkgd.min.js"></script>
        <script src="vendors/slick/slick.js"></script>
        <script src="vendors/counter-up/jquery.waypoints.min.js"></script>
        <script src="vendors/counter-up/jquery.counterup.min.js"></script>
        <script src="vendors/popup/jquery.magnific-popup.min.js"></script>
        
		<script src="js/theme-dist.js"></script>
		<script>
			var inputValues = {
    price: {
        _value: 30000,
        set value(val) {
            this._value = parseFloat(val);
            var tiv = inputValues.trade_in_value.value;
            var cdp = inputValues.cash_down_payment.value;

            if(this._value < tiv + cdp) {
                if(this._value > tiv) {
                    inputValues.cash_down_payment.value = this._value - tiv;
                } else {
                    inputValues.cash_down_payment.value = 0;
                    inputValues.trade_in_value.value = this._value;
                }
            }
        },
        get value() {
            return this._value;
        },
        min: 0,
        max: 500000,
        step: 5000,
        reset: function () {
            this._value = 30000;
        }
    },
    cash_down_payment: {
        _value: 6000,
        set value(val) {
            this._value = parseFloat(val);
            var sum = this._value + inputValues.trade_in_value.value;
            if(sum > inputValues.price.value) {
                inputValues.trade_in_value.value = inputValues.price.value - this._value;
            }
        },
        get value() {
            return this._value;
        },
        min: 0,
        get max() {
            return inputValues.price.value;
        },
        step: 500,
        reset: function () {
            this._value = 6000;
        }
    },
    trade_in_value: {
        _value: 0,
        set value(val) {
            this._value = parseFloat(val);
            var sum = this._value + inputValues.cash_down_payment.value;
            if(sum > inputValues.price.value) {
                inputValues.cash_down_payment.value = inputValues.price.value - this._value;
            }
        },
        get value() {
            return this._value;
        },
        min: 0,
        get max() {
            return inputValues.price.value;
        },
        step: 500,
        reset: function () {
            this._value = 0;
        }
    },
    tax_rate: {
        min: 0,
        max: 20,
        step: 0.1,
        _value: 0,
        get value() {
            return parseFloat(this._value);
        },
        set value(val) {
            this._value = val;
        },
        reset: function () {
            this._value = 0;
        }
    },
    term: {
        min: 12,
        max: 84,
        step: 12,
        _value: 60,
        get value() {
            return parseFloat(this._value);
        },
        set value(val) {
            this._value = val;
        },
        reset: function () {
            this._value = 60;
        }
    },
    apr: {
        min: 0,
        max: 30,
        step: 0.1,
        _value: 2.5,
        get value() {
            return parseFloat(this._value);
        },
        set value(val) {
            this._value = val;
        },
        reset: function () {
            this._value = 2.5;
        }
    }
};

var legendData = {
  get interest() {
      return this.est_total_cost - inputValues.price.value - this.taxes;
  },
  get taxes() {
      return inputValues.price.value * inputValues.tax_rate.value / 100;
  },
  get est_total_cost() {
    return this.est_m_payment * inputValues.term.value + inputValues.cash_down_payment.value + inputValues.trade_in_value.value;
  },
  get est_m_payment() {
      var principal = this.taxes + inputValues.price.value - inputValues.cash_down_payment.value - inputValues.trade_in_value.value;
      var r = inputValues.apr.value / 1200;
      var n = inputValues.term.value;
      var t = Math.pow(1 + r, n);

      if(!r) {
          return 0;
      }

      return principal * r * t / (t - 1);
  }

};

var chartData = [
  {
      label: 'Interest',
      id: 'interest',
      color: '#F79082',
      get value() {
          return legendData.interest;
      }
  },
  {
      label: 'Taxes',
      id: 'taxes',
      color: '#DBEFAF',
      get value() {
          return inputValues.price.value * inputValues.tax_rate.value / 100;
      }
  },
  {
      label: 'Trade-In Value',
      id: 'trade-in-value',
      color: '#88D2E0',
      get value() {
          return inputValues.trade_in_value.value;
      }
  },
  {
      label: 'Cash Down Payment',
      id: 'cash_down_payment',
      color: '#4098FF',
      get value() {
          return inputValues.cash_down_payment.value
      }
  },
  {
      label: 'Vehicle Price',
      id: 'price',
      color: '#5A6372',
      get value() {
        return inputValues.price.value;
      }
  }
];

draw();

function draw() {
    var paddingTop = 30;

    var tooltip = d3.select('.chart-box')
        .append('div')
        .attr('class', 'tooltip');

    tooltip.append('div')
        .attr('class', 'color-icon');

    tooltip.append('div')
        .attr('class', 'label');

    var chart = document.querySelector('.chart');
    chart.innerHTML = '';

    var width = chart.offsetWidth;
    var height = chart.offsetWidth + 2;

    var radius = width / 2;

    var color = d3.scaleOrdinal()
        .domain(chartData.map(function (d) {
            return d.label;
        }))
        .range(function (d) {
            return d.color;
        });

    var svg = d3.select('.chart')
        .append('svg')
        .attr('width', width)
        .attr('height', height)
        .append('g')
        .attr('transform', 'translate(' + (width / 2) +
            ',' + (height / 2) + ')');

    var donutWidth = width > 250 ? 30 : 20;
    var innerRadius = radius - donutWidth;
    var arc = d3.arc()
        .innerRadius(innerRadius)
        .outerRadius(radius);

    var pie = d3.pie()
        .padAngle(.007)
        .value(function (d) {
            return d.value;
        })
        .sort(null);

    var path = svg.selectAll('path')
        .data(pie(chartData))
        .enter()
        .append('path')
        .attr('d', arc)
        .attr('fill', function (d) {
            return d.data.color;
        });

    path.on('mouseover', function (d) {
        var x = arc.centroid(d)[0];
        var y = arc.centroid(d)[1];

        var r = innerRadius + donutWidth / 2;
        var cos = x / r;
        var sin = y / r;

        var top = height / 2 + y + paddingTop;
        var left = width / 2 + x;

        tooltip.select('.label').text(d.data.label);
        tooltip
            .style('top', top + 'px')
            .style('left', left + 'px')
            .style('display', 'flex');

        tooltip.select('.color-icon')
            .style('background-color', d.data.color);

        if (cos > 0.5) {
            tooltip.attr('class', 'tooltip west');
        } else if (cos < -0.5) {
            tooltip.attr('class', 'tooltip east');
        } else if (sin > 0.86) {
            tooltip.attr('class', 'tooltip south');
        } else {
            tooltip.attr('class', 'tooltip north');
        }
    });

    path.on('mouseout', function () {
        tooltip.style('display', 'none');
    });

    var estimateText = d3.select('.chart')
        .append('div')
        .attr('class', 'estimate');

    estimateText
        .append('div')
        .attr('class', 'estimate__heading')
        .append('text')
        .html('Estimated<br>monthly payment*');

    estimateText
        .append('div')
        .attr('class', 'estimate__value')
        .text(Math.ceil(legendData.est_m_payment));

    // controllers
    document.querySelectorAll('.controller-row')
        .forEach(function (group) {
            var min = inputValues[group.id].min;
            var max = inputValues[group.id].max;
            var value = inputValues[group.id].value;
            var step = inputValues[group.id].step;

            var boundary = max ? 100 * (value - min) / (max - min) : 0;

            var range = group.querySelector('input[type=range]');

            range.setAttribute('style',
                'background-image: linear-gradient(90deg, #4098FF 0%, #4098FF ' + boundary + '%, white ' + boundary + '%);'
            );
            range.min = min;
            range.max = max;
            range.value = value;
            range.step = step;

            var textInput = group.querySelector('input[type=number]');
            textInput.min = min;
            textInput.max = max;
            textInput.value = value;
            textInput.step = step;
        });

    // legends
    document.querySelectorAll('.chart__description-value')
        .forEach(function (valueWrapper) {
            var value = legendData[valueWrapper.classList[1]];
            valueWrapper.textContent = Math.round(value);
        })
}

document.querySelectorAll('.info')
    .forEach(function (element) {
       element.addEventListener('mouseover', function (e) {
           if(e.screenY > window.innerHeight / 2 + 100) {
               element.querySelector('.info__tooltip').classList.add('north');
           } else {
               element.querySelector('.info__tooltip').classList.remove('north');
           }
       });
    });

document.querySelectorAll('.controller-row')
    .forEach(function (group) {
        var range = group.querySelector('input[type=range]');
        var textInput = group.querySelector('input[type=number]');
        var id = group.id;

        range.addEventListener('input', function (e) {
            inputValues[id].value = e.target.value;
            draw();
        });
        textInput.addEventListener('change', function (e) {
            inputValues[id].value = e.target.value;
            draw();
        });
    });

document.querySelector('.btn__reset')
    .addEventListener('click', function () {
       Object.values(inputValues).map(function (value) {
           value.reset();
       });
       draw();
    });

document.querySelectorAll('.btn__toggle-modal')
    .forEach(function (btn) {
        btn.addEventListener('click', function () {
            var dialog = document.querySelector('.dialog');
            dialog.classList.toggle('open');
        });
    });

d3.select(window)
    .on('resize', draw);



		</script>
    </body>
</html>
